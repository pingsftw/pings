<!DOCTYPE html>
<html>
<head>
  <title>Webs</title>
  <%= stylesheet_link_tag    'application', media: 'all' %>
  <%= javascript_include_tag 'application' %>
  <%= csrf_meta_tags %>
  <script> var user = <%= current_user ? current_user.to_json.html_safe : "null"%> </script>
  <script>window.Satoshis = 10000000</script>
</head>
<body>
  <header></header>
<div id="main">
<%= yield %>
</div>

<footer>
Webs are a token of support for the open internet.
</footer>

</body>

<script type="text/template" id="header-template">
<div class="home"><a>Webs</a></div>
  <div class="projects"><a>Projects</a></div>
  <div class="book"><a>Book</a></div>
  <div class="history"><a>History</a></div>
  <div class="faq"><a>FAQ</a></div>
  <%% if (typeof(email) != "undefined") { %>
    <div class="user">
      <p><label>email</label><a class="data user" href="/users/<%%=stellar_id%>"><%%=email%></a></p>
      <p><label>Webs total</label><span class="data"><%%= balances.webs %></span></p>
    </div>
    <div class="logout-button"><span>Log out</span></div>
  <%%} %>
</script>

<script type="text/template" id="projects-template">
</script>

<script type="text/template" id="stripe-template">
  <div class="input"><label>card number</label><input class="card_num"/><span class="grumpy luhn">Luhn check failure</span></div>
  <div class="input"><label>card cvc</label><input class="card_cvc"/><span class="grumpy cvc">three numbers, pls</span></div>
  <div class="input"><label>card expiration month</label><input class="card_exp month"/><span class="grumpy exp">in, like, the future</span></div>
  <div class="input"><label>card expiration year</label><input class="card_exp year"/><span class="grumpy exp">four numbers, pls</span></div>
  <button class="submit-card">Pay with this card</button>
  <div class="stripe-error grumpy"></div>
</script>

<script type="text/template" id="charge-template">
  <h2>Charge</h2>
  <form name="charge" action="/cards/charge.json" method="POST">
    <label>US Dollars</label><input name=quantity>
    <button class="submit">Donate!</button>
  </form>
</script>

<script type="text/template" id="faq-template">
  <h3>What are Webs?</h3>
  <p>Webs are tokens of commitment to the open internet. They are a social currency for the community of people that want to keep the internet awesome.</p>
  <h3>How do I get them?</h3>
  <p>You receive Webs by making donations to open internet organizations and projects, such as Fight For the Future, Freedom of the Press Foundation, and more to come. You will soon be able to get them by contributing on our site.</p>
  <h3>What can I do with Webs?</h3>
  <p>You can send them to friends or organizations, you can vote for what projects will receive new webs, and soon you'll be able to redeem them for open internet swag.
  They have no cash value.</p>
  <h3>How does voting work?</h3>
  <p>When you receive Webs, you pick an open internet project or organization to vote for. Every time we create new Webs, these votes decide which groups or projects receive them. Voting is proportional to the number of Webs you hold.</p>

</script>


<script type="text/template" id="buy-template">
  <h2>Buying WEBs</h2>
  <div class="stripe"><button class="stripe">Use a credit card</button></div>
  <button class="btc">Show BTC payment address</button>
</script>

<script type="text/template" id="home-template">
  <div class="welcome" style="display:none">
    <h1>Join the Webs community!</h1>
    <p class="blahblah">
      Webs are a token of commitment to an open internet.
      People receive them by donating to projects and groups supporting an open web.
      Sign up and donate to get some!
      <a class="action causes">What causes, you ask?</a>
    </p>
  <div class="projects"></div>
  </div>
  <div class="user-box"></div>
  <div class='pricing' style="display:none">
    <h3>Pricing</h3>
    <div class="mini-book"><span class="grumpy">Loading pricing infos</span></div>
    <div class="support"><span class="grumpy">Loading your support info</span></div>
    <div class="book"></div>
  </div>
</script>

<script type="text/template" id="history-template">
</script>

<script type="text/template" id="mini-book-template">
  <p><label>current Webs price</label><span class="data"><%%= web / (pay / Satoshis) %> Webs per Bitcoin.</span></p>
  <p>Up to <span class="data"><%%= pay / Satoshis %> BTC</span> worth are available at that price.</p>
</script>

<script type="text/template" id="books-template">
  <h2>Available Webs</h2>
  <div class="btc-book"></div>
  <div class="usd-book"></div>
</script>
<script type="text/template" id="book-template">
  <ul class="book-items">
    <li>
    <div class='btc'>  <%%=currency%> available </div>
      <div class='price'> Price </div>
      <div class='qty'>   Webs </div>
      <div class='project'>Project</div>
    </li>
  </ul>
</script>

<script type="text/template" id="book-item-template">
  <div class='btc'>  <%%= pay / Satoshis %></div>
  <div class='price'>  <%%= price / Satoshis%></div>
  <div class='qty'>    <%%= web %></div>
  <div class='project'><%%= project ? project.name : "Unknown" %></div>
</script>

<script type="text/template" id="sign-up-template">
  <h2>Sign up now!</h2>
  <form name="sign_up" action="/users.json" method="POST">
    <div class="form-group">
    <label>Email</label>
    <input name=email>
    <div class="error">
  </div>
    <div class="form-group">
    <label>password</label>
    <input name=password type=password>
    <div class="error">
  </div>
    <div class="form-group">
    <button type=submit>Join!</button>
  </div>
  </form>
  <a class="subtle login">I already have an account!</a>
</script>

<script type="text/template" id="profile-template">
  <h2>PROFILE</h2>
  <%% if (typeof(webs) !== "undefined" ) { %>
      <p><label>Total webs</label><span class="data"><%%=webs%></span></p>
      <p><label>Currently Supporting</label><span class="data"><%%=supporting%></span></p>
  <%% } else {%>
    LOADING
  <%% } %>

</script>

<script type="text/template" id="login-template">
  <h2>Log in now</h2>
  <form name="login" action="/sessions.json" method="POST">
    <div class="form-group">
    <label>Email</label>
    <input name=email>
    <div class="error">
  </div>
    <div class="form-group">
    <label>password</label>
    <input name=password type=password>
    <div class="error">
  </div>
    <div class="form-group">
    <button type=submit>Log in</button>
  </div>
  <a class="subtle signup" style="display: none;">Hmm, I guess I'll sign up after all</a>
  </form>
</script>

<script type="text/template" id="transaction-item-template">
  Bought <%%= webs_qty %> Webs for <%%= payment_qty / Satoshis %> <%%= payment_currency %> from
  <%%= project ? project.name : "Unknown source" %>
</script>

<script type="text/template" id="transactions-template">
  <h2>Your Purchases</h2>
  <ul></ul>
</script>

<script type="text/template" id="payments-template">
  <%% if (models.length) { %>
    <h2>Your Payments</h2>
    <ul class="payment-list"></ul>
  <%% } else { %>
    <div class="reminder">
    We haven't received your first payment.
    </div>
  <%% } %>

</script>


<script type="text/template" id="payment-item-template">
  <time title=<%%=created_at%>><%%=created_at%></time>
  <div class="value"><%%=value / Satoshis %> BTC</div>
  <div class="from"><%%=input_address %></div>
  <div class="hash"><%%=input_transaction_hash %></div>
</script>

<script type="text/template" id="project-item-template">
  <div class="name"><%%=name%></div>
  <div class="webs"><%%=webs%> webs</div>
  <%% if (best_offer) %>
    <div class="price"><%%=best_offer.price%> best price (BTC/WEB)</div>
  <%% ; %>
</script>

<script type="text/template" id="project-list-template">
  <h2>Projects</h2>
  <ul class="project-list"></ul>
</script>

<script type="text/template" id="support-template">
  <h2>Supporting Projecs</h2>
  <p>Your Webs are supporting <span class="data"><%%= supporting %></span></p>

  <h3>Changing Support</h3>
  <p>You can <span class="action">change who you are supporting</span> in the next vote</p>
  <div class="change-support"><span class="grumpy">Loading Support Datas</span></div>
</script>

<script type="text/template" id="change-support-template">
  <form name="change-support" action="/users/support.json" method="PUT">
    <select name="project_id">
    </select>
    <button type=submit>Change</button>
</form>
</script>

<script type="text/template" id="logout-button-template">
  <form name="log_out" action="/sessions.json" method="DELETE">
    <div class="form-group">
      <button type=submit>Log out</button>
    </div>
  </form>
</script>

</html>
